<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Subprocess (subprocess.Subprocess)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">subprocess</a> &#x00BB; Subprocess</nav><header class="odoc-preamble"><h1>Module <code><span>Subprocess</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Core"><a href="#module-Core" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Core/index.html">Core</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Here follows the interface defined in the <code>Core</code> module. This module is included in most of the user-facing modules for convenience, so you may stumble across its documentation in several places.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Core/index.html">Core</a></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-stdin"><a href="#type-stdin" class="anchor"></a><code><span><span class="keyword">type</span> stdin</span><span> = <a href="Core/index.html#type-stdin">Core.stdin</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stdout"><a href="#type-stdout" class="anchor"></a><code><span><span class="keyword">type</span> stdout</span><span> = <a href="Core/index.html#type-stdout">Core.stdout</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stderr"><a href="#type-stderr" class="anchor"></a><code><span><span class="keyword">type</span> stderr</span><span> = <a href="Core/index.html#type-stderr">Core.stderr</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-channel"><a href="#type-channel" class="anchor"></a><code><span><span class="keyword">type</span> channel</span><span> = <a href="Core/index.html#type-channel">Core.channel</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-devnull"><a href="#type-devnull" class="anchor"></a><code><span><span class="keyword">type</span> devnull</span><span> = <a href="Core/index.html#type-devnull">Core.devnull</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file"><a href="#type-file" class="anchor"></a><code><span><span class="keyword">type</span> file</span><span> = <a href="Core/index.html#type-file">Core.file</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-append"><a href="#type-append" class="anchor"></a><code><span><span class="keyword">type</span> append</span><span> = <a href="Core/index.html#type-append">Core.append</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-pipe"><a href="#type-pipe" class="anchor"></a><code><span><span class="keyword">type</span> pipe</span><span> = <a href="Core/index.html#type-pipe">Core.pipe</a></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Subprocess_error"><a href="#exception-Subprocess_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Subprocess_error</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>When the library raises, it always raises a Subprocess_error of string.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Cmd"><a href="#module-Cmd" class="anchor"></a><code><span><span class="keyword">module</span> Cmd</span><span> = <a href="Core/Cmd/index.html">Core.Cmd</a></span></code></div><div class="spec-doc"><p>home of Cmd.t, which is kind of the whole basis of the thing.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Exit"><a href="#module-Exit" class="anchor"></a><code><span><span class="keyword">module</span> Exit</span><span> = <a href="Core/Exit/index.html">Core.Exit</a></span></code></div><div class="spec-doc"><p>types for exit status with lots of extra info for fun and profit.</p></div></div><p>In and Out are I/O wrappers for process streams. It's thanks to these bad boys we can have such verbose types.</p><div class="odoc-spec"><div class="spec module anchored" id="module-In"><a href="#module-In" class="anchor"></a><code><span><span class="keyword">module</span> In</span><span> = <a href="Core/In/index.html">Core.In</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Out"><a href="#module-Out" class="anchor"></a><code><span><span class="keyword">module</span> Out</span><span> = <a href="Core/Out/index.html">Core.Out</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('stdin, 'stdout, 'stderr) t</span></span><span> = <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/index.html#type-t">Core.t</a></span></span><span> = </span><span>{</span></code><ol><li id="type-t.pid" class="def record field anchored"><a href="#type-t.pid" class="anchor"></a><code><span>pid : int;</span></code></li><li id="type-t.cmd" class="def record field anchored"><a href="#type-t.cmd" class="anchor"></a><code><span>cmd : <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span>;</span></code></li><li id="type-t.stdin" class="def record field anchored"><a href="#type-t.stdin" class="anchor"></a><code><span>stdin : <span><span class="type-var">'stdin</span> <a href="Core/In/index.html#type-t">In.t</a></span>;</span></code></li><li id="type-t.stdout" class="def record field anchored"><a href="#type-t.stdout" class="anchor"></a><code><span>stdout : <span><span class="type-var">'stdout</span> <a href="Core/Out/index.html#type-t">Out.t</a></span>;</span></code></li><li id="type-t.stderr" class="def record field anchored"><a href="#type-t.stderr" class="anchor"></a><code><span>stderr : <span><span class="type-var">'stderr</span> <a href="Core/Out/index.html#type-t">Out.t</a></span>;</span></code></li><li id="type-t.close" class="def record field anchored"><a href="#type-t.close" class="anchor"></a><code><span>close : <span><span class="optlabel">?mode</span>:<span><span class="xref-unresolved">Unix</span>.wait_flag list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="Core/Exit/index.html#type-t">Exit.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The type <a href="#type-t"><code>t</code></a> represents a process which may still be running. Some of the higher-level functions don't expose it directly, but almost everything else is implemented in terms of this type.</p><p>Apply <code>()</code> to the <code>close</code> property to close any managed file descriptors and wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Obligatory pretty printer, for your debugging pleasure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><p>What follows are some helper functions which fetch pipes to a running process for interactive reading and writting. They shadow channels with the same names in the standard library. Probably a good reason to only open <code>Subprocess</code> within a limited scope.</p><p>If you try to use one of these functions to access a stream which isn't a pipe, it's a type error.</p><div class="odoc-spec"><div class="spec value anchored" id="val-stdin"><a href="#val-stdin" class="anchor"></a><code><span><span class="keyword">val</span> stdin : <span><span><span>(<a href="#type-pipe">pipe</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.out_channel</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stdout"><a href="#val-stdout" class="anchor"></a><code><span><span class="keyword">val</span> stdout : <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-pipe">pipe</a>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.in_channel</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stderr"><a href="#val-stderr" class="anchor"></a><code><span><span class="keyword">val</span> stderr : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-pipe">pipe</a>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.in_channel</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait"><a href="#val-wait" class="anchor"></a><code><span><span class="keyword">val</span> wait : 
  <span><span class="optlabel">?mode</span>:<span><span class="xref-unresolved">Unix</span>.wait_flag list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  int * <a href="Core/Exit/index.html#type-status">Exit.status</a></span></code></div><div class="spec-doc"><p>Teeny, tiny, leaky wrapper for <code>Unix.waitpid</code> refer to its documentation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poll"><a href="#val-poll" class="anchor"></a><code><span><span class="keyword">val</span> poll : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Core/Exit/index.html#type-status">Exit.status</a> option</span></span></code></div><div class="spec-doc"><p>Find out if your process has finished executing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cmd"><a href="#val-cmd" class="anchor"></a><code><span><span class="keyword">val</span> cmd : 
  <span><span class="optlabel">?prog</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?env</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-stdin">stdin</a>, <a href="#type-stdout">stdout</a>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>Helper funtions for constructing Cmd.t. The optional <code>prog</code> argument is mainly for if you don't want your path to be searched for the executable.</p><p><code>env</code> is a list of strings with the format <code>&quot;NAME=value&quot;</code>. <code>block</code> may be set to <code>false</code> for non-blocking I/O on pipes. This one setting is used with any pipes which are used for I/O. Remember to catch <code>Sys_blocked_io</code> when doing I/O with any non-blocking pipes.</p><p>Both <code>env</code> and <code>block</code> can also be set with combinators.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pipe_in"><a href="#val-pipe_in" class="anchor"></a><code><span><span class="keyword">val</span> pipe_in : <span><span><span>(<a href="#type-stdin">stdin</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-pipe">pipe</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdin to a pipe for writing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pipe_out"><a href="#val-pipe_out" class="anchor"></a><code><span><span class="keyword">val</span> pipe_out : <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-stdout">stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'stdin</span>, <a href="#type-pipe">pipe</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to a pipe for reading.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pipe_err"><a href="#val-pipe_err" class="anchor"></a><code><span><span class="keyword">val</span> pipe_err : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-pipe">pipe</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to a pipe for writing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-channel_in"><a href="#val-channel_in" class="anchor"></a><code><span><span class="keyword">val</span> channel_in : 
  <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-stdin">stdin</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-channel">channel</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdin to an in_channel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-channel_out"><a href="#val-channel_out" class="anchor"></a><code><span><span class="keyword">val</span> channel_out : 
  <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-stdout">stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <a href="#type-channel">channel</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to an out_channel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-channel_err"><a href="#val-channel_err" class="anchor"></a><code><span><span class="keyword">val</span> channel_err : 
  <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-channel">channel</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stderr to an out_channel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file_in"><a href="#val-file_in" class="anchor"></a><code><span><span class="keyword">val</span> file_in : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-stdin">stdin</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-file">file</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdin to an named file. Similar to <code>&lt;</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file_out"><a href="#val-file_out" class="anchor"></a><code><span><span class="keyword">val</span> file_out : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-stdout">stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <a href="#type-file">file</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to an named file. Similar to <code>&gt;</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file_err"><a href="#val-file_err" class="anchor"></a><code><span><span class="keyword">val</span> file_err : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-file">file</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stderr to an named file. Similar to <code>2&gt;</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-append_out"><a href="#val-append_out" class="anchor"></a><code><span><span class="keyword">val</span> append_out : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-stdout">stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <a href="#type-append">append</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to an named file for appending. Similar to <code>&gt;&gt;</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-append_err"><a href="#val-append_err" class="anchor"></a><code><span><span class="keyword">val</span> append_err : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-append">append</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stderr to an named file for appending. Similar to <code>2&gt;&gt;</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-devnull_out"><a href="#val-devnull_out" class="anchor"></a><code><span><span class="keyword">val</span> devnull_out : 
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-stdout">stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <a href="#type-devnull">devnull</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stdout to /dev/null. similar to <code>&gt; /dev/null</code> in the shell</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-devnull_err"><a href="#val-devnull_err" class="anchor"></a><code><span><span class="keyword">val</span> devnull_err : 
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-stderr">stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="#type-devnull">devnull</a>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>redirect stderr to /dev/null. similar to <code>2&gt; /dev/null</code> in the shell</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-env"><a href="#val-env" class="anchor"></a><code><span><span class="keyword">val</span> env : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>Set additional environment variables. Variables are passed in as a list of strings with the format <code>&quot;NAME=value&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_block"><a href="#val-no_block" class="anchor"></a><code><span><span class="keyword">val</span> no_block : 
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span></span></code></div><div class="spec-doc"><p>Use non-blocking I/O on any pipes. When doing I/O with any such channel, you must catch <code>Sys_blocked_io</code> in the event no data is ready for reading.</p></div></div></details></div><p>The following functions are generated in a functor to provide a similar interface across several output types. When the documentation speaks about something being &quot;wrapped in the ouptut type&quot;, it means the <code>Subprocess_error</code> is raised in the event of non-zero exit status, and otherwise the value is unchanged.</p><div class="odoc-spec"><div class="spec value anchored" id="val-exec"><a href="#val-exec" class="anchor"></a><code><span><span class="keyword">val</span> exec : 
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/index.html#type-t">Core.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Execute a command in, where a handle to the created process will be availbe as the sole input parameter of the function <code>f</code>. When <code>f</code> exits, we close any &quot;dangling&quot; file descriptors and wait for the process to exit, finally returning the output value of <code>f</code> wrapped in the output type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec_joined"><a href="#val-exec_joined" class="anchor"></a><code><span><span class="keyword">val</span> exec_joined : 
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-pipe">Core.pipe</a>, <a href="Core/index.html#type-stdout">Core.stdout</a>)</span> <a href="Core/index.html#type-t">Core.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-exec"><code>exec</code></a>, but stdout and stderr are redirected to the same pipe. This is similar to <code>2&gt;&amp;1 |</code> in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Execute the command and wait for it to exit, returning <code>()</code> wrapped in the output type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span><span><span>(<a href="Core/index.html#type-stdin">Core.stdin</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">input</span>:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Execute the command and write the <code>input</code> string to the stdin of the process.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_lines"><a href="#val-write_lines" class="anchor"></a><code><span><span class="keyword">val</span> write_lines : 
  <span><span><span>(<a href="Core/index.html#type-stdin">Core.stdin</a>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">input</span>:<span>string <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Execute the command and write the <code>input</code> <code>Seq.t</code> instance to the stdin of the process, separated by newline characters. If you want to read from stdout while writing, use <a href="#val-fold_with"><code>fold_with</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Execute the command and read its stdout into a string wrapped in the output type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lines"><a href="#val-lines" class="anchor"></a><code><span><span class="keyword">val</span> lines : <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-read"><code>read</code></a> but with a list of lines wrapped in the output type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_err"><a href="#val-read_err" class="anchor"></a><code><span><span class="keyword">val</span> read_err : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Same as <a href="#val-read"><code>read</code></a>, but reads stderr rather than stdout.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lines_err"><a href="#val-lines_err" class="anchor"></a><code><span><span class="keyword">val</span> lines_err : <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-lines"><code>lines</code></a>, but reads stderr rather than stdout.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_joined"><a href="#val-read_joined" class="anchor"></a><code><span><span class="keyword">val</span> read_joined : <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Same as <a href="#val-read"><code>read</code></a> but reads stdout and stderr as a single stream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lines_joined"><a href="#val-lines_joined" class="anchor"></a><code><span><span class="keyword">val</span> lines_joined : <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-lines"><code>lines</code></a> but reads stdout and stderr as a single stream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_both"><a href="#val-read_both" class="anchor"></a><code><span><span class="keyword">val</span> read_both : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  string * string</span></code></div><div class="spec-doc"><p>Same as <a href="#val-read_joined"><code>read_joined</code></a> but reads stdout and stderr as a separate strings streams, returning a pair of strings wrapped in the ouput type. This function uses asynchronous I/O internally, so the optional <code>sleep</code> parameter is provided as a means to pause briefly if output is expected to be slow to avoid pegging the CPU with a loop that does nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lines_both"><a href="#val-lines_both" class="anchor"></a><code><span><span class="keyword">val</span> lines_both : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>string list</span> * <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-lines_joined"><code>lines_joined</code></a> but reads stdout and stderr as a separate strings streams, returning a pair of string lists wrapped in the ouput type. This function uses asynchronous I/O internally, so the optional <code>sleep</code> parameter is provided as a means to pause briefly if output is expected to be slow to avoid pegging the CPU with a loop that does nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : 
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Execute the command. Do a left fold over the lines of output from the processe's stdout. Wraps the accumulated output in the output type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_err"><a href="#val-fold_err" class="anchor"></a><code><span><span class="keyword">val</span> fold_err : 
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-fold"><code>fold</code></a>, but fold over lines from stderr.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_joined"><a href="#val-fold_joined" class="anchor"></a><code><span><span class="keyword">val</span> fold_joined : 
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-fold"><code>fold</code></a>, but joins stdout and stderr into a single stream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_both"><a href="#val-fold_both" class="anchor"></a><code><span><span class="keyword">val</span> fold_both : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <a href="Core/index.html#type-stderr">Core.stderr</a>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-fold_joined"><code>fold_joined</code></a>, but wraps each line of stdin in <code>Ok</code> and lines of stderr in <code>Error</code> so they can be distinguished. This function uses asynchronous I/O internally, so the optional <code>sleep</code> parameter is provided as a means to pause briefly if output is expected to be slow to avoid pegging the CPU with a loop that does nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_with"><a href="#val-fold_with" class="anchor"></a><code><span><span class="keyword">val</span> fold_with : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sep</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="Core/index.html#type-stdin">Core.stdin</a>, <a href="Core/index.html#type-stdout">Core.stdout</a>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Core.Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">lines</span>:<span>string <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Execute the command. Feed items from <code>lines</code> to the process stdin, which will be separated with a newline character by default. Use the optional <code>sep</code> parameter to change this to another string. While all that is happening, fold over lines from stdout. This function uses asynchronous I/O internally, so the optional <code>sleep</code> parameter is provided as a means to pause briefly if output is expected to be slow to avoid pegging the CPU with a loop that does nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(let&amp;)"><a href="#val-(let&amp;)" class="anchor"></a><code><span><span class="keyword">val</span> (let&amp;) : 
  <span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="Core/Cmd/index.html#type-t">Cmd.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span><span>(<span class="type-var">'stdin</span>, <span class="type-var">'stdout</span>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>let&amp;</code> is a binding operator which wrappes <a href="#val-exec"><code>exec</code></a> to provide a cleaner syntax, especially when binding multipe processes in a pipeline.</p><pre class="language-ocaml"><code>  let&amp; proc = cmd [&quot;echo&quot;; &quot;foo&quot;] |&gt; pipe_out in
  In_channel.input_all (stdout proc)

  (* equivalent to *)

  exec (cmd [&quot;echo&quot;; &quot;foo&quot;] |&gt; pipe_out)
    ~f:(fun proc -&gt; In_channel.input_all (stdout proc))</code></pre></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Results"><a href="#module-Results" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Results/index.html">Results</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <a href="Results/index.html"><code>Results</code></a> module presents an interface similar to the top-level functions in the <a href="#"><code>Subprocess</code></a> module, but the output is wrapped in a result type, where a non-zere exit status becomes <code>Error of</code> <a href="Core/Exit/index.html#type-t"><code>Exit.t</code></a>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StringResults"><a href="#module-StringResults" class="anchor"></a><code><span><span class="keyword">module</span> <a href="StringResults/index.html">StringResults</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <a href="StringResults/index.html"><code>StringResults</code></a> module presents an interface similar to the functions in the <a href="Results/index.html"><code>Results</code></a> module, but the output is wrapped in a result type, where a non-zere exit status becomes <code>Error of string</code>. <code>string</code> is perhaps less useful than <code>Exit.t</code> but it composes better. <a href="Core/index.html"><code>Core</code></a> is included here to avoid having to open both <code>Subprocess</code> and <code>StringResults</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Unchecked"><a href="#module-Unchecked" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Unchecked/index.html">Unchecked</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <a href="Unchecked/index.html"><code>Unchecked</code></a> module presents an interface similar to the top-level functions in the <a href="#"><code>Subprocess</code></a> module, but the output is wrapped as a pair with <a href="Core/Exit/index.html#type-t"><code>Exit.t</code></a> as the first element, <a href="Core/index.html"><code>Core</code></a> is included here to avoid having to open both <code>Subprocess</code> and <code>Unchecked</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Exec"><a href="#module-Exec" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Exec/index.html">Exec</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <a href="Exec/index.html"><code>Exec</code></a> module is exposed for starting processes without a managing scope. <a href="Exec/index.html#val-exec"><code>Exec.exec</code></a> and <a href="Exec/index.html#val-shared_pipe"><code>Exec.shared_pipe</code></a> exist for this purpose.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Non_blocking_io_expected"><a href="#exception-Non_blocking_io_expected" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Non_blocking_io_expected</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>The following functions expect that their inputs process handles were executed with a <a href="Core/Cmd/index.html#type-t"><code>Cmd.t</code></a> instance where <code>block=false</code> and will raise this exception if it was not. We could, in principle, prevent this at a type level, but non-blocking I/O operations were added quite late in the design of this library, and I'm still debating whether adding yet another type parameter is wise. For the time being, it's an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_both_proc"><a href="#val-read_both_proc" class="anchor"></a><code><span><span class="keyword">val</span> read_both_proc : <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-pipe">pipe</a>, <a href="#type-pipe">pipe</a>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string * string</span></code></div><div class="spec-doc"><p>Takes a process handle where both stdout and stderr are set to pipe as input and reads streams from each into a string, returning the pair of strings. Raises <a href="#exception-Non_blocking_io_expected"><code>Non_blocking_io_expected</code></a> if I/O is blocking.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_both_proc"><a href="#val-fold_both_proc" class="anchor"></a><code><span><span class="keyword">val</span> fold_both_proc : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'stdin</span>, <a href="#type-pipe">pipe</a>, <a href="#type-pipe">pipe</a>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Takes a process handle where both stdout and stderr are set to pipe and folds over each. See <a href="#val-fold_both"><code>fold_both</code></a> for more usage details. Raises <a href="#exception-Non_blocking_io_expected"><code>Non_blocking_io_expected</code></a> if I/O is blocking.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_with_proc"><a href="#val-fold_with_proc" class="anchor"></a><code><span><span class="keyword">val</span> fold_with_proc : 
  <span><span class="optlabel">?sleep</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sep</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-pipe">pipe</a>, <a href="#type-pipe">pipe</a>, <span class="type-var">'stderr</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">lines</span>:<span>string <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Takes a process handle where both stdin and stdout are set to pipe and folds over output. See <a href="#val-fold_with"><code>fold_with</code></a> for more usage details. Raises <a href="#exception-Non_blocking_io_expected"><code>Non_blocking_io_expected</code></a> if I/O is blocking.</p></div></div></div></body></html>
